import React from "react";
import styled from "styled-components";
import { JourneyListingsProvider, JourneyListingsConsumer } from "../core/JourneyListingsProvider";
import JourneyFilter from "./JourneyFilter";

const MomentsStyles = styled.ul`
  margin: 40px 10%;
  li {border: 2px solid var(--roxin); padding: 30px 20px 20px; margin-bottom: 20px; position:relative;}
  li h4 {font-size:1.3rem;}
  li p {font-size:.8rem;}
  li h5 {font-size:1rem; color: var(--verde); margin: 0;}
  li h6 {font-size:.9rem; color: var(--verde); margin: 0;}
  time {background: var(--roxin); color: #fff; position:absolute; top: 0; left:0; 
    font-size: .6rem; padding: .1rem 20px; font-weight: bold;}
  li.academic h4:after, li.professional h4:after, li.volunteer h4:after {
    width: 20px; height: 20px; content: ""; display: inline-block; margin-left:10px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="rgb(255 201 250)" viewBox="0 0 398.97 398.97"><path d="M225.092,276.586c-7.101,4.355-16.195,6.754-25.607,6.754c-9.412,0-18.506-2.398-25.607-6.754L57.946,205.484         c0,0-10.464-6.414-10.464,8.116c0,16.5,0,66,0,66c0,0.66,0,3.973,0,5c0,37.402,68.053,77.723,152,77.723s152-40.32,152-77.723         c0-1.027,0-4.34,0-5c0,0,0-52.502,0-70.003c0-11.663-7.439-5.964-7.439-5.964L225.092,276.586z"></path><path d="M392.289,148.927c8.908-5.463,8.908-14.403,0-19.867L215.681,40.745c-8.908-5.463-23.485-5.463-32.393,0L6.681,129.06 c-8.908,5.463-8.908,14.403,0,19.867l176.607,108.315c8.908,5.463,23.485,5.463,32.393,0"></path><path d="M384.985,309.475c0-29.906,0-119.625,0-119.625s0.083-5.666-3.279-3.795c-2.697,1.501-9.308,5.186-11.637,7.212 c-2.689,2.337-2.083,7.583-2.083,7.583s0,81.469,0,108.625c0,1.542-1.325,2.278-1.957,2.65 c-6.105,3.589-10.21,10.214-10.21,17.809c0,11.414,9.252,20.667,20.667,20.667c11.414,0,20.666-9.253,20.666-20.667 c0-7.624-4.135-14.27-10.279-17.85C386.262,311.728,384.985,311.016,384.985,309.475z"></path></svg>');
    background-repeat: no-repeat; background-position: center;
  }
  li.professional h4:after {
    background-image: url('data:image/svg+xml;utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(255 201 250)" viewBox="0 0 511.626 511.627"><path d="M319.77,338.039c0,4.949-1.811,9.236-5.424,12.847c-3.617,3.621-7.902,5.428-12.851,5.428h-91.361 c-4.952,0-9.233-1.807-12.85-5.428c-3.616-3.61-5.424-7.897-5.424-12.847V292.36H0v137.044c0,12.56,4.471,23.312,13.418,32.257 c8.945,8.946,19.701,13.419,32.264,13.419h420.266c12.56,0,23.315-4.473,32.261-13.419c8.949-8.945,13.418-19.697,13.418-32.257 V292.36H319.77V338.039L319.77,338.039z"></path><rect x="219.266" y="292.36" width="73.096" height="36.545"></rect><path d="M498.208,123.054c-8.945-8.947-19.701-13.418-32.261-13.418H365.446V63.953c0-7.614-2.663-14.084-7.994-19.414 c-5.325-5.327-11.8-7.993-19.411-7.993H173.589c-7.612,0-14.083,2.666-19.414,7.993s-7.994,11.799-7.994,19.414v45.683H45.682 c-12.562,0-23.318,4.471-32.264,13.418C4.471,132,0,142.75,0,155.313v109.636h511.626V155.313 C511.626,142.75,507.158,132,498.208,123.054z M328.904,109.636H182.725V73.089h146.179V109.636z"></path></svg>');
  }
  li.volunteer h4:after {
    background-image: url('data:image/svg+xml;utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(255 201 250)" viewBox="0 0 512.003 512.003"><path style="fill:rgb(255 201 250);" d="M229.644,124.319l-22.153,59.016l29.943,34.067l7.969,7.413  c12.751,11.86,21.017,27.756,23.402,45.006l0,0c2.088,15.089-0.431,30.458-7.227,44.09l-3.819,7.663l14.383,25.606l11.768,49.021  c1.985,8.271-7.247,14.652-14.283,9.872l-64.344-43.715l-76.354-9.195c-3.318-0.4,2.266-15.146,6.895-27.043  c3.454-8.878,4.294-18.552,2.426-27.892l-6.547-32.731c0.315-2.228,1.425-4.267,3.126-5.74l47.55-41.144l-17.096-38.053  c0,0-31.654-7.955-36.5-7.285c-2.499,0.346-15.811-6.913-28.083-14.002c-13.839-7.996-23.221-21.921-25.411-37.754l0,0  l-7.205-16.913c37.22-46.217,91.443-78.875,154.857-87.647c1.567-0.217,3.136-0.419,4.695-0.59l19.151,26.72  c7.445,10.386,10.785,23.161,9.38,35.862l-3.009,27.182C252.416,112.845,232.881,118.394,229.644,124.319z"/><path style="fill:rgb(255 201 250);" d="M509.532,220.927C498.338,140.01,449.362,69.66,377.797,30.869c-0.508-0.319-1.028-0.614-1.565-0.864  c-2.334-1.244-4.692-2.455-7.073-3.632C323.173,3.666,271.913-4.609,220.918,2.446c-1.869,0.259-3.73,0.549-5.587,0.848  c-0.161,0.026-0.324,0.047-0.485,0.073c-1.682,0.272-3.353,0.573-5.025,0.877c-0.388,0.07-0.779,0.136-1.168,0.208  c-1.751,0.327-3.494,0.68-5.233,1.042c-0.258,0.054-0.516,0.104-0.773,0.16c-1.875,0.397-3.741,0.816-5.602,1.253  c-0.063,0.015-0.126,0.029-0.189,0.044c-17.506,4.124-34.394,10.042-50.549,17.713c-0.335,0.16-0.671,0.319-1.005,0.479  c-1.381,0.664-2.76,1.337-4.131,2.026c-0.724,0.363-1.441,0.734-2.161,1.103c-1.042,0.536-2.083,1.071-3.117,1.622  c-1.286,0.683-2.562,1.384-3.837,2.089c-0.505,0.28-1.015,0.552-1.519,0.836c-28.092,15.789-53.174,36.912-73.862,62.603  c-3.393,4.213-4.187,9.953-2.067,14.929l6.485,15.225c3.317,19.574,14.994,36.398,32.28,46.386  c25.798,14.903,30.518,15.978,35.221,15.978c0.357,0,0.713-0.012,1.068-0.035c3.375,0.264,14.463,2.625,25.188,5.187l9.696,21.581  l-39.307,34.01c-4.38,3.79-7.237,9.036-8.045,14.771c-0.231,1.635-0.183,3.298,0.141,4.918l6.547,32.731  c1.323,6.613,0.73,13.428-1.714,19.708c-8.608,22.126-11.4,31.257-6.51,39.417c2.502,4.175,6.699,6.903,11.516,7.483l72.819,8.769  l61.401,41.714c4.018,2.729,8.665,4.172,13.438,4.172c7.287,0,14.349-3.443,18.895-9.207c4.54-5.757,6.151-13.183,4.426-20.376  l-11.768-49.021c-0.315-1.313-0.812-2.577-1.472-3.755l-10.583-18.842l0.359-0.721c8.145-16.344,11.128-34.545,8.626-52.631  c-2.839-20.528-12.761-39.608-27.936-53.725l-7.43-6.91l-23.657-26.917l17.969-47.868c1.455-0.929,3.753-2.184,5.416-3.091  c8.372-4.572,18.792-10.263,20.042-21.552l3.009-27.182c1.806-16.322-2.467-32.661-12.033-46.008l-3.737-5.214  c31.564-0.188,62.699,6.198,91.724,18.905c-1.557,1.991-3.148,4.087-4.705,6.238c-6.661,9.197-22.257,30.734-8.735,45.051  c1.472,1.559,3.015,3.049,4.506,4.49c1.499,1.447,3.681,3.555,5.145,5.249c-11.784,10.422-23.695,28.673-19.484,46.906  c2.325,10.061,10.386,23.432,35.591,29.99c14.526,3.78,30.044,5.933,39.332-3.919c21.996,9.468,33.046,15.067,33.152,15.121  c2.131,1.086,4.402,1.6,6.641,1.6c5.334,0,10.476-2.923,13.063-8c3.674-7.207,0.809-16.029-6.399-19.703  c-0.497-0.252-12.43-6.312-36.528-16.64c-6.92-2.967-14.327-5.31-21.622-2.383c-4.657,1.868-7.329,5.142-8.873,7.771  c-2.126-0.18-5.706-0.722-11.385-2.2c-9.833-2.559-13.915-6.033-14.424-8.231c-0.976-4.225,4.046-12.969,10.747-18.712  c8.565-7.341,10.548-15.08,10.703-20.279c0.366-12.327-8.432-21.006-15.017-27.369c2.422-4.922,8.144-13.107,14.803-21.243  c58.281,35.251,97.903,94.881,107.321,162.957c2.372,17.147,2.789,34.234,1.302,51.134c-9.166-8.73-19.172-18.323-21.932-21.073  c-10.577-10.537-29.819-12.427-38.51-11.961c-21.813,1.182-60.388,6.528-73.651,29.044c-16.337,27.69-12.952,57.784,9.052,80.497  c0.728,0.753,1.399,1.462,2.016,2.129c-8.795,1.986-19.377,7.325-24.393,22.69c-2.512,7.691,1.688,15.962,9.379,18.473  c1.509,0.494,3.041,0.728,4.549,0.728c6.167,0,11.906-3.926,13.923-10.107c1.001-3.06,1.105-3.381,8.439-3.793  c14.752-0.815,20.518-7.801,22.755-13.517c5.123-13.08-5.019-26.033-15.619-36.985c-16.205-16.728-11.591-33.828-4.861-45.234  c3.617-6.138,21.951-13.148,49.997-14.668c5.886-0.324,14.296,1.729,16.248,3.46c2.691,2.682,26.82,25.85,36.755,35.107  c-0.781,3.119-1.61,6.229-2.527,9.326c-25.228,85.221-98.384,148.152-186.378,160.326c-59.973,8.299-119.581-7.257-167.854-43.797  s-79.424-89.692-87.72-149.662c-3.712-26.827-2.66-53.713,3.125-79.908c1.745-7.9-3.245-15.719-11.145-17.464  c-7.903-1.746-15.719,3.245-17.464,11.145c-6.537,29.601-7.728,59.961-3.539,90.243c9.368,67.723,44.549,127.744,99.061,169.007  c44.933,34.011,98.555,51.922,153.944,51.92c11.809,0,23.707-0.816,35.607-2.461c99.362-13.746,181.973-84.805,210.457-181.034  C511.874,293.526,514.568,257.332,509.532,220.927z M241.606,77.341l-2.564,23.165c-1.623,1.011-3.866,2.235-5.409,3.078  c-6.857,3.744-13.334,7.282-16.847,13.707c-0.331,0.605-0.617,1.232-0.86,1.877l-22.153,59.016  c-1.9,5.061-0.857,10.758,2.712,14.819l29.942,34.067c0.324,0.369,0.667,0.722,1.027,1.056l7.968,7.411  c10.25,9.535,16.952,22.422,18.87,36.286c1.691,12.216-0.325,24.508-5.826,35.548l-3.819,7.663  c-2.165,4.344-2.039,9.477,0.338,13.709l13.385,23.832l8.072,33.622l-52.93-35.958c-1.935-1.315-4.157-2.148-6.481-2.427  l-60.99-7.345c1.337-3.656,2.713-7.188,3.431-9.036c4.474-11.5,5.559-23.975,3.139-36.078l-5.391-26.949l44.742-38.712  c4.894-4.234,6.43-11.177,3.778-17.081l-17.096-38.053c-1.837-4.089-5.444-7.111-9.792-8.204  c-11.073-2.783-30.358-7.376-38.399-7.744c-2.114-0.897-8.007-3.69-22.427-12.021c-10.004-5.778-16.648-15.647-18.228-27.076  c-0.179-1.285-0.526-2.54-1.034-3.734l-3.687-8.655c14.677-16.873,31.59-31.307,50.17-43.006c1.305-0.823,2.619-1.63,3.938-2.424  c0.501-0.302,1.003-0.602,1.507-0.899c1.023-0.605,2.051-1.197,3.081-1.786c0.699-0.398,1.396-0.8,2.099-1.191  c0.658-0.366,1.321-0.719,1.982-1.08c19.516-10.587,40.612-18.301,62.727-22.806c0.205-0.041,0.409-0.085,0.612-0.126  c1.295-0.259,2.596-0.504,3.898-0.743c0.574-0.105,1.148-0.208,1.724-0.308c1.141-0.199,2.284-0.393,3.429-0.576  c0.208-0.034,0.418-0.063,0.626-0.095l14.006,19.542C240.228,59.086,242.617,68.219,241.606,77.341z"/></svg>');
  }
`;


export const Timeline = () => {
  return (
    <>
        <JourneyListingsProvider>
          <JourneyListingsConsumer>
            {({ journeyListings, allListings, updateFilter }) => (     
              <>      
                <JourneyFilter
                  updateFilter={updateFilter}
                  years={allListings
                    .map(listing => listing.years)}
                />
                <MomentsStyles>
                  {journeyListings.map(listing => (
                    <li key={listing.id} data-year="{listing.years[0]}" className={listing.type}>
                      <time>{listing.years[0]} - {listing.years[1]}</time>
                      <h4>{listing.title}</h4>
                      <p>{listing.description}</p>
                      <h5>{listing.institution}</h5>
                      <h6>{listing.place}</h6>
                    </li>
                  ))}
                </MomentsStyles>
              </> 
            )}
          </JourneyListingsConsumer>
        </JourneyListingsProvider>
    </>
  );
};

export default Timeline;